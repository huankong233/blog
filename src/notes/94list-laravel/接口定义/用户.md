---
title: 用户
author: huan_kong
createTime: 2024/04/10 14:57:16
permalink: /docs/94list-laravel/接口定义/用户/
---

::: warning
带有 `?` 的说明均为个人理解
:::

## 1.获取服务器配置文件

路径: `/api/user/getConfig`

请求参数:

| 字段 | 类型 | 说明 | 默认值 | 必须 |
| ---- | ---- | ---- | ------ | ---- |

返回数据:

| 字段             | 类型      | 说明             |
| ---------------- | --------- | ---------------- |
| `announce`       | `string`  | 公告内容         |
| `announceSwitch` | `boolean` | 是否展示公告     |
| `userAgent`      | `string`  | 下载时使用的UA   |
| `debug`          | `boolean` | 是否开启调试模式 |
| `haveAccount`    | `boolean` | 是否还有可用代理 |
| `havePassword`   | `string`  | 是否需要密码     |
| `haveLogin`      | `boolean` | 是否已经登陆     |

## 2.获取文件列表

路径: `/api/user/getFileList`

请求参数:

| 字段       | 类型     | 说明                            | 默认值     | 必须 |
| ---------- | -------- | ------------------------------- | ---------- | ---- |
| `password` | `string` | 解析密码                        |            |      |
| `url`      | `string` | 网盘地址                        |            | ✓    |
| `dir`      | `string` | 文件夹路径                      |            |      |
| `root`     | `1 \| 0` | 是否是根目录(会使用dir自动判断) | `0`        |      |
| `pwd`      | `string` | 网盘链接密码                    | `''`       |      |
| `page`     | `number` | 第几页                          | `1`        |      |
| `num`      | `number` | 一页有多少个                    | `9999`     |      |
| `order`    | `number` | 排序方式                        | `filename` |      |

返回数据:

| 字段      | 类型     | 说明     |
| --------- | -------- | -------- |
| `uk`      | `number` |          |
| `shareid` | `number` |          |
| `randsk`  | `string` |          |
| `list`    | `file[]` | 文件列表 |

file:
| 字段名            | 字段类型 | 说明                |
| ----------------- | -------- | ------------------- |
| `category`        | `string` | 文件类型            |
| `fs_id`           | `string` | 文件id              |
| `isdir`           | `string` | 是否为文件夹        |
| `local_ctime`     | `string` | 本地文件创建时间`?` |
| `local_mtime`     | `string` | 本地文件修改时间`?` |
| `md5`             | `string` | md5                 |
| `path`            | `string` | 文件路径            |
| `server_ctime`    | `string` | 文件创建时间`?`     |
| `server_filename` | `string` | 服务器文件名        |
| `server_mtime`    | `string` | 文件修改时间`?`     |
| `size`            | `string` | 文件大小            |
| `dlink`           | `string` | 下载链接            |

## 3.获取文件签名

路径: `/api/user/getSign`

请求参数:

| 字段       | 类型     | 说明     | 默认值 | 必须 |
| ---------- | -------- | -------- | ------ | ---- |
| `password` | `string` | 解析密码 |        |      |
| `shareid`  | `number` |          |        | ✓    |
| `uk`       | `number` |          |        | ✓    |

返回数据:

| 字段        | 类型     | 说明 |
| ----------- | -------- | ---- |
| `sign`      | `string` |      |
| `timestamp` | `number` |      |

## 4.获取下载链接

路径: `/api/user/downloadFiles`

请求参数:

| 字段         | 类型       | 说明                   | 默认值 | 必须 |
| ------------ | ---------- | ---------------------- | ------ | ---- |
| `password`   | `string`   | 解析密码               |        |      |
| `bd_user_id` | `number`   | 管理员指定某个账户解析 |        |      |
| `fs_ids`     | `number[]` | 文件id                 |        | ✓    |
| `randsk`     | `string`   |                        |        | ✓    |
| `shareid`    | `number`   |                        |        | ✓    |
| `sign`       | `string`   |                        |        | ✓    |
| `timestamp`  | `number`   |                        |        | ✓    |
| `uk`         | `number`   |                        |        | ✓    |

返回数据:

没有字段, 直接就是一个 `file[]`

file:
| 字段              | 类型     | 说明     |
| ----------------- | -------- | -------- |
| `dlink`           | `string` | 下载链接 |
| `server_filename` | `string` | 文件名   |
